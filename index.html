<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CineMatch AI | Gaurav Singh</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    
    <style>
        :root { --accent: #e50914; --bg: #080808; --card: #181818; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; overflow-x: hidden; }
        
        /* Premium Navbar */
        .header { 
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent); 
            padding: 20px 60px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            position: fixed; 
            width: 100%; 
            z-index: 1000;
            box-sizing: border-box;
        }
        .logo { font-size: 28px; font-weight: 900; color: var(--accent); letter-spacing: -1px; }
        
        /* BOLD & BIG NAME BRANDING */
        .architect-tag { 
            font-size: 18px; 
            font-weight: 800; 
            color: #fff; 
            border-right: 4px solid var(--accent); 
            padding-right: 15px; 
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* HERO HOOK SECTION */
        .hero { 
            height: 60vh; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://wpassets.trainingpeaks.com/wp-content/uploads/2018/05/01115545/movie-posters-training-motivation.jpg');
            background-size: cover;
            background-position: center;
            text-align: center;
            padding: 0 20px;
        }
        .hero h1 { font-size: 50px; margin: 0; font-weight: 900; }
        .hero p { font-size: 22px; color: #ccc; margin-top: 10px; max-width: 700px; }

        .layout { display: flex; max-width: 1400px; margin: -80px auto 50px; gap: 30px; padding: 0 40px; position: relative; z-index: 10; }

        /* Control Sidebar */
        .sidebar { width: 350px; background: #111; padding: 35px; border-radius: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.6); border: 1px solid #222; height: fit-content; }
        .main-content { flex: 1; }

        /* Select2 Style Override */
        .select2-container--default .select2-selection--single { background-color: #252525 !important; border: 1px solid #444 !important; height: 55px !important; border-radius: 8px !important; }
        .select2-container--default .select2-selection--single .select2-selection__rendered { color: #fff !important; line-height: 55px !important; font-weight: 600; padding-left: 20px !important;}
        .select2-dropdown { background-color: #252525 !important; color: white !important; border: 1px solid #444 !important; border-radius: 8px; }
        .select2-search__field { background-color: #333 !important; color: white !important; border-radius: 5px; }

        .label { display: block; margin-top: 25px; margin-bottom: 10px; font-size: 14px; font-weight: 700; color: var(--accent); text-transform: uppercase; }
        input[type=range] { width: 100%; accent-color: var(--accent); margin-bottom: 5px; }
        
        .btn { 
            width: 100%; background: var(--accent); color: white; border: none; padding: 18px; 
            border-radius: 8px; font-weight: 900; font-size: 18px; cursor: pointer; margin-top: 30px; 
            transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .btn:hover { background: #ff0a16; transform: translateY(-3px); box-shadow: 0 10px 20px rgba(229, 9, 20, 0.4); }

        /* Movie Display */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 25px; }
        .movie-card { background: var(--card); border-radius: 12px; overflow: hidden; border: 1px solid #222; transition: 0.4s; position: relative; }
        .movie-card:hover { transform: scale(1.05); border-color: var(--accent); z-index: 5; }
        .movie-card img { width: 100%; height: 300px; object-fit: cover; }
        .movie-card p { padding: 15px; font-size: 15px; margin: 0; text-align: center; font-weight: 700; color: #eee;}

        #loading { display: none; text-align: center; margin-top: 20px; color: var(--accent); font-weight: bold; font-size: 14px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">CINEMATCH</div>
        <div class="architect-tag">ARCHITECT: GAURAV SINGH</div>
    </div>

    <div class="hero">
        <h1>UNLIMITED MOVIE DNA</h1>
        <p>Analyze thousands of plot patterns. Discover hidden gems. <br>Your next obsession is just one click away.</p>
    </div>

    <div class="layout">
        <div class="sidebar">
            <form action="/recommend" method="post" onsubmit="showLoad()">
                <span class="label">Step 1: Discover Base Movie</span>
                <select name="movie_name" id="movie_search" style="width: 100%;" required>
                    <option value="">Search movie database...</option>
                    {% for movie in movies %}
                        <option value="{{ movie }}">{{ movie }}</option>
                    {% endfor %}
                </select>

                <span class="label">Step 2: Analysis Depth (<span id="num-val">{{ current_num if current_num else 5 }}</span> Matches)</span>
                <input type="range" name="num_movies" min="3" max="18" value="{{ current_num if current_num else 5 }}" oninput="document.getElementById('num-val').innerText = this.value">

                <button type="submit" class="btn" id="submit-btn">CALCULATE MATCHES</button>
                <div id="loading">âœ¨ AI IS ANALYZING CONTENT VECTORS...</div>
            </form>
        </div>

        <div class="main-content">
            {% if recommendations %}
                <h2 style="margin-top:0; border-left: 5px solid var(--accent); padding-left: 15px;">TOP AI MATCHES FOR {{ selected_movie }}</h2>
                <div class="grid">
                    {% for rec in recommendations %}
                    <div class="movie-card">
                        <img src="{{ rec.poster }}">
                        <p>{{ rec.title }}</p>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div style="text-align:center; padding: 120px 40px; border: 2px dashed #333; border-radius: 20px; background: rgba(255,255,255,0.02);">
                    <h2 style="color: #444; margin-bottom: 10px;">ENGINE READY</h2>
                    <p style="color: #555;">Select a movie on the left to start the Vector Analysis Engine.</p>
                </div>
            {% endif %}
        </div>
    </div>

    <script>
        $(document).ready(function() {
            $('#movie_search').select2();
        });
        function showLoad() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('submit-btn').innerText = 'ANALYZING...';
            document.getElementById('submit-btn').disabled = true;
        }
    </script>
</body>
</html>